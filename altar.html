<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>digital offerings - test</title>
  <link rel="stylesheet" href="style.css">
  <script src="prompts.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <div id="prompt-container"></div>

  <form id="submissionForm">
    <textarea id="userText" placeholder="Type something..." rows="5" cols="30"></textarea><br>
    <input type="file" id="imageInput" accept="image/*"><br>
    <button type="submit">Generate JSON</button>
  </form>
  <pre id="output"></pre>

  <script>
    const form = document.getElementById("submissionForm");
    const output = document.getElementById("output");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const text = document.getElementById("userText").value;
      const imageFile = document.getElementById("imageInput").files[0];

      let imageBase64 = null;
      if (imageFile) {
        const reader = new FileReader();
        reader.onloadend = () => {
          imageBase64 = reader.result;

          const entry = {
            text: text || null,
            imageBase64: imageBase64 || null,
            timestamp: new Date().toISOString()
          };

          output.textContent = JSON.stringify(entry, null, 2);
          alert("Copy this JSON and add it to your data.json file!");
        };
        reader.readAsDataURL(imageFile);
      } else {
        const entry = {
          text: text || null,
          imageBase64: null,
          timestamp: new Date().toISOString()
        };

        output.textContent = JSON.stringify(entry, null, 2);
        alert("Copy this JSON and add it to your data.json file!");
      }

      form.reset();
    });
  </script>
</body>
</html>

